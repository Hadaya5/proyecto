<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ text['profile'] }}</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='profile.css') }}">
    <link rel="stylesheet" href="{{url_for('static', filename='footer.css')}}">
</head>
<body>
    <ion-app>
        {% import './macros/toolbar.html' as toolbar %}
        {{toolbar.toolbar(loged=True,text=text)}}
        {% import './macros/footer.html' as footer %}
        {{footer.footer(text)}}
        {% import './macros/publicacion.html' as publicacion %}
        {% import './macros/publicar.html' as publicar %}
    
        <ion-content padding="false">
            <ion-grid>
                <ion-row>
                    <ion-col style="top: 0px;" id="profile-container" size-xs="12" size-md="8" offset-md="2">
                        <div class="container-portada">
                            <img class="portada" src="{{ user['cover'] if user.get('cover') else url_for('static',filename='images/default/profile_cover.jpg') }}" alt="portada">            
                            <div class="profile-item">
                                <ion-item color="none" lines="none" class="item-profile">
                                    <div class="avatar">
                                        <ion-avatar class="perfil-icon" slot="start">
                                            <img class="perfil-icon-img" alt="Silhouette of a person's head" src="{{ '/static/images/' + user.get('icon') if user.get('icon') else url_for('static',filename='images/default/profile_icon.png') }}" />
                                            <ion-fab-button class="edit-icon-button" size="small" onclick="document.querySelector('#inputfile').click()" style="height: 40px; width: 40px;">
                                                <ion-icon  name="image"></ion-icon>
                                            </ion-fab-button>                                    
                                        </ion-avatar>
                                        <input  type="file" accept="image/*" id="inputfile" style="display: none;">
                                    </div>
                                    <ion-text>
                                        <h1 class="username" >{{user['name'] + ' ' + user['lastname']}}</h1>
                                    </ion-text>
                                </ion-item>
    
                            </div>
    
                        </div>
                
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col style="top: 0px;" id="profile-container" size-xs="12" size-md="8" offset-md="2">
                        <ion-card>
                            <ion-card-header>
                                <ion-card-title>
                                    <ion-title>
                                        {{text['aboutme']}}
                                    </ion-title>
                                </ion-card-title>
                            </ion-card-header>
                            <ion-list>
                                {% for g in ['description','color','book','music','videogames','languages'] %}
                                <ion-item>
                                    <ion-text>
                                        <b>{{text[g]}}:</b>{{user[g]}}
                                    </ion-text>
                                </ion-item>
                                {% endfor %}
                            </ion-list>
                        </ion-card>
                    </ion-col>
                </ion-row>
                {% if editable %}
                <ion-row>
                    <ion-col size-xs="12" size-sm="4" offset-sm="4">
                        <ion-item color="tertiary" id="text-pensando" class="ion-text-center">
                            
                            <ion-avatar slot="start">
                                <img alt="Silhouette of a person's head" src="{{'/static/images/' + user['icon']}}" />
                            </ion-avatar>
                            <ion-item id="open-modal" button class="pub-text-item">
                                    {{text['thinking']}}
                            </ion-item>
                        </ion-item>
                        <ion-modal trigger="open-modal">
                            {{publicar.publicar(text,'/static/images/' + user['icon']) }}
                        </ion-modal>
                
                    </ion-col>
                </ion-row>
                {% endif %}
                {% for post in posts %}
                <ion-row>
                    <ion-col  size-xs="12" size-sm="4" offset-sm="4">
                        {{publicacion.publicacion('/static/images/' + users[post['uid']]['icon'],users[post['uid']]['name'] + ' ' + users[post['uid']]['lastname'] ,post['content'],'/static/images/' + post['media'])}}
                    </ion-col>
                </ion-row>
                {% endfor %}

            </ion-grid>
        </ion-content>
    </ion-app>
<script src="{{ url_for('static', filename='scripts/profile.js') }}"></script>

</body>
</html>